<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">    <title>数据管理 - FinLoom</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/web/assets/modern-finance.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-chart-line"></i> <span class="menu-text">FinLoom</span></h1>
                <button class="menu-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav class="sidebar-menu">
                <a href="/" class="menu-item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="menu-text">仪表板</span>
                </a>
                <a href="/web/pages/analysis.html" class="menu-item">
                    <i class="fas fa-brain"></i>
                    <span class="menu-text">智能分析</span>
                </a>
                <a href="/web/pages/portfolio.html" class="menu-item">
                    <i class="fas fa-briefcase"></i>
                    <span class="menu-text">投资组合</span>
                </a>
                <a href="/web/pages/backtest.html" class="menu-item">
                    <i class="fas fa-history"></i>
                    <span class="menu-text">策略回测</span>
                </a>
                <a href="/web/pages/data.html" class="menu-item active">
                    <i class="fas fa-database"></i>
                    <span class="menu-text">数据管理</span>
                </a>
                <a href="/web/pages/reports.html" class="menu-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="menu-text">报告中心</span>
                </a>
                <a href="/web/pages/settings.html" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span class="menu-text">系统设置</span>
                </a>
            </nav>
        </aside>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 顶部导航 -->
            <header class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item"><a href="/">首页</a></span>
                        <span class="breadcrumb-divider">/</span>
                        <span class="breadcrumb-item active">数据管理</span>
                    </div>
                    <div class="page-title">
                        <h2>数据管理中心</h2>
                        <p class="page-subtitle">管理和维护市场数据，确保数据质量</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="搜索股票代码、数据源...">
                        </div>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-download"></i>
                            导出数据
                        </button>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-upload"></i>
                            导入数据
                        </button>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMyNTYzZWIiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDhDMTAuMjA5MSA4IDEyIDYuMjA5MTQgMTIgNEMxMiAxLjc5MDg2IDEwLjIwOTEgMCA4IDBDNS43OTA4NiAwIDQgMS43OTA4NiA0IDRDNCw2LjIwOTE0IDUuNzkwODYgOCA4IDhaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOCAxMEM0LjY4NjI5IDEwIDIgMTIuNjg2MyAyIDE2SDE0QzE0IDEyLjY4NjMgMTEuMzEzNyAxMCA4IDEwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo=" alt="用户头像">
                        </div>
                        <div class="user-info">
                            <div class="user-name">张投资</div>
                            <div class="user-role">高级投资者</div>
                        </div>
                        <button class="user-menu-toggle">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- 页面内容 -->
            <div class="content">
                <!-- 数据概览 -->
                <div class="card-grid">
                    <div class="metric-card primary">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="metric-label">数据总量</div>
                        </div>
                        <div class="metric-value">2.5M</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>+12.5% 本周</span>
                        </div>
                        <div class="metric-detail">
                            <span>股票数据: 1.8M</span>
                            <span>指数数据: 0.7M</span>
                        </div>
                    </div>
                    <div class="metric-card success">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="metric-label">数据质量</div>
                        </div>
                        <div class="metric-value">98.5%</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>+0.3% 今日</span>
                        </div>
                        <div class="metric-detail">
                            <span>完整率: 99.2%</span>
                            <span>准确率: 97.8%</span>
                        </div>
                    </div>
                    <div class="metric-card info">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="metric-label">更新频率</div>
                        </div>
                        <div class="metric-value">实时</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>延迟 < 1s</span>
                        </div>
                        <div class="metric-detail">
                            <span>最后更新: 15:00:00</span>
                            <span>数据源: 3个</span>
                        </div>
                    </div>
                    <div class="metric-card warning">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="metric-label">异常数据</div>
                        </div>
                        <div class="metric-value">23</div>
                        <div class="metric-trend down">
                            <i class="fas fa-arrow-down"></i>
                            <span>-5 今日</span>
                        </div>
                        <div class="metric-detail">
                            <span>待处理: 8</span>
                            <span>已修复: 15</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-3">
                    <!-- 数据收集 -->
                    <div class="card">
                        <div class="card-header">
                            <h3>数据收集</h3>
                        </div>
                        <div class="card-body">
                            <form id="dataCollectionForm">
                                <div class="form-group">
                                    <label class="form-label">股票代码</label>
                                    <input id="data-symbol" type="text" class="form-control" placeholder="例如：000001">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">数据周期</label>
                                    <select id="data-period" class="form-select">
                                        <option value="1y">1年</option>
                                        <option value="2y">2年</option>
                                        <option value="5y">5年</option>
                                        <option value="10y">10年</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">数据源</label>
                                    <select class="form-select">
                                        <option value="akshare">Akshare</option>
                                        <option value="tushare">Tushare</option>
                                        <option value="yahoo">Yahoo Finance</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-pro btn-pro-primary btn-block">
                                    <i class="fas fa-download"></i> 收集数据
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- 系统状态 -->
                    <div class="card">
                        <div class="card-header">
                            <h3>系统状态</h3>
                        </div>
                        <div class="card-body">
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">API服务</div>
                                <div class="value"><span class="badge badge-success">正常</span></div>
                                <div class="trend">数据接口可用</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">数据库</div>
                                <div class="value"><span class="badge badge-success">正常</span></div>
                                <div class="trend">连接正常</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">数据源</div>
                                <div class="value"><span class="badge badge-success">正常</span></div>
                                <div class="trend">数据更新正常</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">模型服务</div>
                                <div class="value"><span class="badge badge-warning">模拟模式</span></div>
                                <div class="trend">测试环境中</div>
                            </div>
                        </div>
                    </div>

                    <!-- 数据统计 -->
                    <div class="card">
                        <div class="card-header">
                            <h3>数据统计</h3>
                        </div>
                        <div class="card-body">
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">总股票数</div>
                                <div class="value">1,247</div>
                                <div class="trend">A股市场</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">总数据条数</div>
                                <div class="value">2,456,789</div>
                                <div class="trend">历史数据记录</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">今日更新</div>
                                <div class="value">1,247</div>
                                <div class="trend">新增数据</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">数据完整性</div>
                                <div class="value">98.5%</div>
                                <div class="trend up"><i class="fas fa-arrow-up"></i> 数据质量良好</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据概览 -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <h3>数据概览</h3>
                        <div>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-sync-alt"></i> 刷新
                            </button>
                            <button class="btn btn-sm btn-pro btn-pro-primary" style="margin-left: 8px;">
                                <i class="fas fa-file-export"></i> 导出
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>股票代码</th>
                                        <th>股票名称</th>
                                        <th>数据条数</th>
                                        <th>最新价格</th>
                                        <th>更新时间</th>
                                        <th>数据质量</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="data-overview">
                                    <!-- 动态内容将在这里显示 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 加载状态覆盖层 -->
    <div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center;">
        <div style="background: white; padding: 20px; border-radius: 8px; text-align: center;">
            <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #2563eb;"></i>
            <p style="margin-top: 10px;">正在收集数据...</p>
        </div>
    </div>

    <!-- 主应用脚本 -->
    <script src="/web/js/app.js?v=2.4"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 侧边栏切换
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.querySelector('.sidebar');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
            });
        });
    </script>
</body>
</html>