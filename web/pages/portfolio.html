<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">    <title>投资组合 - FinLoom</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/web/assets/modern-finance.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-chart-line"></i> <span class="menu-text">FinLoom</span></h1>
                <button class="menu-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav class="sidebar-menu">
                <a href="/" class="menu-item">
                    <i class="fas fa-tachometer-alt"></i>
                    <span class="menu-text">仪表板</span>
                </a>
                <a href="/web/pages/analysis.html" class="menu-item">
                    <i class="fas fa-brain"></i>
                    <span class="menu-text">智能分析</span>
                </a>
                <a href="/web/pages/portfolio.html" class="menu-item active">
                    <i class="fas fa-briefcase"></i>
                    <span class="menu-text">投资组合</span>
                </a>
                <a href="/web/pages/backtest.html" class="menu-item">
                    <i class="fas fa-history"></i>
                    <span class="menu-text">策略回测</span>
                </a>
                <a href="/web/pages/data.html" class="menu-item">
                    <i class="fas fa-database"></i>
                    <span class="menu-text">数据管理</span>
                </a>
                <a href="/web/pages/reports.html" class="menu-item">
                    <i class="fas fa-file-alt"></i>
                    <span class="menu-text">报告中心</span>
                </a>
                <a href="/web/pages/settings.html" class="menu-item">
                    <i class="fas fa-cog"></i>
                    <span class="menu-text">系统设置</span>
                </a>
            </nav>
        </aside>

        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 顶部导航 -->
            <header class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item"><a href="/">首页</a></span>
                        <span class="breadcrumb-divider">/</span>
                        <span class="breadcrumb-item active">投资组合</span>
                    </div>
                    <div class="page-title">
                        <h2>投资组合管理</h2>
                        <p class="page-subtitle">实时监控和管理您的投资组合</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="搜索股票代码、名称...">
                        </div>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-plus"></i>
                            添加持仓
                        </button>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-download"></i>
                            导出
                        </button>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="user-profile">
                        <div class="user-avatar">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMyNTYzZWIiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDhDMTAuMjA5MSA4IDEyIDYuMjA5MTQgMTIgNEMxMiAxLjc5MDg2IDEwLjIwOTEgMCA4IDBDNS43OTA4NiAwIDQgMS43OTA4NiA0IDRDNCw2LjIwOTE0IDUuNzkwODYgOCA4IDhaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOCAxMEM0LjY4NjI5IDEwIDIgMTIuNjg2MyAyIDE2SDE0QzE0IDEyLjY4NjMgMTEuMzEzNyAxMCA4IDEwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cjwvc3ZnPgo=" alt="用户头像">
                        </div>
                        <div class="user-info">
                            <div class="user-name">张投资</div>
                            <div class="user-role">高级投资者</div>
                        </div>
                        <button class="user-menu-toggle">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- 页面内容 -->
            <div class="content">
                <!-- 组合概览 -->
                <div class="card-grid">
                    <div class="metric-card primary">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="metric-label">总市值</div>
                        </div>
                        <div class="metric-value">¥1,250,000</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>+2.5% 今日</span>
                        </div>
                        <div class="metric-detail">
                            <span>持仓: ¥1,125,000</span>
                            <span>现金: ¥125,000</span>
                        </div>
                    </div>
                    <div class="metric-card success">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="metric-label">总成本</div>
                        </div>
                        <div class="metric-value">¥1,180,000</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>初始投资</span>
                        </div>
                        <div class="metric-detail">
                            <span>平均成本: ¥12.45</span>
                            <span>持仓数量: 15只</span>
                        </div>
                    </div>
                    <div class="metric-card warning">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="metric-label">浮动盈亏</div>
                        </div>
                        <div class="metric-value">+¥70,000</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>+5.93%</span>
                        </div>
                        <div class="metric-detail">
                            <span>已实现: +¥45,000</span>
                            <span>未实现: +¥25,000</span>
                        </div>
                    </div>
                    <div class="metric-card info">
                        <div class="metric-header">
                            <div class="metric-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="metric-label">收益率</div>
                        </div>
                        <div class="metric-value">+5.93%</div>
                        <div class="metric-trend up">
                            <i class="fas fa-arrow-up"></i>
                            <span>年化收益</span>
                        </div>
                        <div class="metric-detail">
                            <span>基准: +3.2%</span>
                            <span>超额: +2.73%</span>
                        </div>
                    </div>
                </div>

                <!-- 持仓和风险指标 -->
                <div class="grid grid-cols-3" style="margin-top: 24px;">
                    <!-- 当前持仓 -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <h3>当前持仓</h3>
                            <div>
                                <button class="btn btn-sm btn-outline">
                                    <i class="fas fa-sync-alt"></i> 刷新
                                </button>
                                <button class="btn btn-sm btn-pro btn-pro-primary" style="margin-left: 8px;">
                                    <i class="fas fa-plus"></i> 添加持仓
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>股票代码</th>
                                            <th>股票名称</th>
                                            <th>持仓数量</th>
                                            <th>成本价</th>
                                            <th>当前价</th>
                                            <th>市值</th>
                                            <th>盈亏</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>000001</td>
                                            <td>平安银行</td>
                                            <td>1,000</td>
                                            <td>¥12.00</td>
                                            <td>¥12.45</td>
                                            <td>¥12,450</td>
                                            <td class="text-success">+¥450 (+3.75%)</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">调整</button>
                                                <button class="btn btn-sm btn-danger" style="margin-left: 4px;">清仓</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>600036</td>
                                            <td>招商银行</td>
                                            <td>500</td>
                                            <td>¥45.00</td>
                                            <td>¥45.67</td>
                                            <td>¥22,835</td>
                                            <td class="text-success">+¥335 (+1.49%)</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">调整</button>
                                                <button class="btn btn-sm btn-danger" style="margin-left: 4px;">清仓</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>601318</td>
                                            <td>中国平安</td>
                                            <td>200</td>
                                            <td>¥55.00</td>
                                            <td>¥56.78</td>
                                            <td>¥11,356</td>
                                            <td class="text-success">+¥356 (+3.24%)</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">调整</button>
                                                <button class="btn btn-sm btn-danger" style="margin-left: 4px;">清仓</button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>000858</td>
                                            <td>五粮液</td>
                                            <td>100</td>
                                            <td>¥180.00</td>
                                            <td>¥185.50</td>
                                            <td>¥18,550</td>
                                            <td class="text-success">+¥550 (+3.06%)</td>
                                            <td>
                                                <button class="btn btn-sm btn-outline">调整</button>
                                                <button class="btn btn-sm btn-danger" style="margin-left: 4px;">清仓</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- 风险指标 -->
                    <div class="card">
                        <div class="card-header">
                            <h3>风险指标</h3>
                        </div>
                        <div class="card-body">
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">组合波动率</div>
                                <div class="value">15.2%</div>
                                <div class="trend">年化波动率</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">最大回撤</div>
                                <div class="value">-8.5%</div>
                                <div class="trend down">历史最大回撤</div>
                            </div>
                            <div class="stat-card" style="margin-bottom: 16px;">
                                <div class="label">夏普比率</div>
                                <div class="value">1.85</div>
                                <div class="trend up">风险调整后收益</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">VaR (95%)</div>
                                <div class="value">-2.1%</div>
                                <div class="trend">日度风险价值</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 持仓分布图表 -->
                <div class="card" style="margin-top: 24px;">
                    <div class="card-header">
                        <h3>持仓分布</h3>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-cols-2">
                            <div>
                                <h4>行业分布</h4>
                                <div class="chart-container" style="height: 300px;">
                                    <canvas id="industryChart"></canvas>
                                </div>
                            </div>
                            <div>
                                <h4>市值分布</h4>
                                <div class="chart-container" style="height: 300px;">
                                    <canvas id="marketCapChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 侧边栏切换
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.querySelector('.sidebar');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
            });

            // 行业分布图表
            const industryCtx = document.getElementById('industryChart').getContext('2d');
            const industryChart = new Chart(industryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['银行', '消费', '科技', '医药', '其他'],
                    datasets: [{
                        data: [25, 20, 30, 15, 10],
                        backgroundColor: [
                            '#2563eb',
                            '#f59e0b',
                            '#ef4444',
                            '#10b981',
                            '#8b5cf6'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    },
                    cutout: '60%'
                }
            });

            // 市值分布图表
            const marketCapCtx = document.getElementById('marketCapChart').getContext('2d');
            const marketCapChart = new Chart(marketCapCtx, {
                type: 'pie',
                data: {
                    labels: ['大盘股', '中盘股', '小盘股'],
                    datasets: [{
                        data: [40, 35, 25],
                        backgroundColor: [
                            '#2563eb',
                            '#3b82f6',
                            '#93c5fd'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>